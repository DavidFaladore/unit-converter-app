require("./renderer.js");var $=require("jQuery");feather.replace();var inpImperial=$("#inpImperial"),selImperial=$("#selImperial"),inpMetric=$("#inpMetric"),selMetric=$("#selMetric"),lastFocus=$("#inpImperial").focus(),infoMeasure=$("#infoMeasure");function convertImperialMetric(){var n,l,c,e,s=convertImperialMetric.metrics,p=convertImperialMetric.imperials,t=arguments,o={imperial:"imperial",metric:"metric"},m=!1,u=2,v="metric";if(o.i=o.imp=o.imperial,o.m=o.met=o.metric,function e(t){for(i in t){var r=t[i];switch(typeof r){case"boolean":m=r;break;case"number":null==n?n=r:u=r;break;case"string":isNaN(parseFloat(r))||null!=n?p.hasOwnProperty(r)?l=r:s.hasOwnProperty(r)?c=r:o.hasOwnProperty(r)&&(v=o[r]):n=parseFloat(r);break;case"object":if(r instanceof Array)e.apply(this,[r]);else if(r instanceof Object)for(h in r){var a=r[h];o.hasOwnProperty(h)?v=o[h]:p.hasOwnProperty(h)?(l=h,null!=n||isNaN(parseFloat(a))||(n=parseFloat(a))):s.hasOwnProperty(h)?(c=h,null!=n||isNaN(parseFloat(a))||(n=parseFloat(a))):e.apply(this,[[a]])}}}}(t),!isNaN(parseFloat(n))&&p.hasOwnProperty(l)&&s.hasOwnProperty(c)&&o.hasOwnProperty(v))if("metric"==v)e=2.54*(n*p[l])*s[c];else if("imperial"==v){e=n/s[c]/2.54/p[l]}return m?parseFloat(e.toFixed(u)):e}convertImperialMetric.imperials={inch:1,feet:12,yard:36,mile:63360},convertImperialMetric.metrics={mm:10,cm:1,dm:.1,m:.01,km:1e-5},$(function(){$.each(convertImperialMetric.imperials,function(e){selImperial.prepend($("<option />",{text:e,value:e}))}),$("#selImperial option[value=inch]").prop("selected",!0).parent().change(),inpImperial.attr("placeholder","Vnesite dol탑ino v "+selImperial.find(":selected").text()),$.each(convertImperialMetric.metrics,function(e){selMetric.prepend($("<option />",{text:e,value:e}))}),$("#selMetric option[value=mm]").prop("selected",!0).parent().change(),inpMetric.attr("placeholder","Vnesite dol탑ino v "+selMetric.find(":selected").text()),infoMeasure.text("1"+selImperial.find(":selected").text()+" = "+convertImperialMetric(1,"mm","inch")+selMetric.find(":selected").text()),$(document).on("focus","input.metric-input",function(e){lastFocus=$(this)}).on("keyup","input.metric-input",function(e){var i=parseFloat($(this).val()),t=selImperial.val(),r=selMetric.val();lastFocus[0].id==inpImperial[0].id?(inpMetric.val(""),isNaN(i)||inpMetric.val(convertImperialMetric(i,t,r))):lastFocus[0].id==inpMetric[0].id&&(inpImperial.val(""),isNaN(i)||inpImperial.val(convertImperialMetric(i,t,r,"imperial")))}).on("change","select.metric-select",function(e){lastFocus.trigger("keyup"),inpImperial.attr("placeholder","Vnesite dol탑ino v "+selImperial.find(":selected").text()),inpMetric.attr("placeholder","Vnesite dol탑ino v "+selMetric.find(":selected").text()),infoMeasure.text("1"+selImperial.find(":selected").text()+" = "+convertImperialMetric(1,selMetric.find(":selected").text(),selImperial.find(":selected").text())+selMetric.find(":selected").text())})});var inpCelsius=$("#inpCelsius"),inpFahrenheit=$("#inpFahrenheit"),inpKelvin=$("#inpKelvin"),convertTemperature={c:0,f:32,k:273.15};function clearFields(){$("input[type=number]").attr("value","")}function showTab(e,i){var t,r,a;for(r=$(".tab-content"),t=0;t<r.length;t++)r[t].style.display="none";for(a=$(".tab-link"),t=0;t<a.length;t++)a[t].className=a[t].className.replace(" active","");$("#"+i).fadeIn(1e3),e.currentTarget.className+=" active"}function setFormHeight(){var e=$(".calc__data"),i=$(window).height()-($(".tabbar-wrapper").height()+15)-($(".calc__heading").height()+9);e.css("height",i+"px")}$(function(){$(document).on("keyup","input.temperature-input",function(e){var i=parseFloat($(this).val()),t=inpCelsius.val(),r=inpFahrenheit.val(),a=inpKelvin.val();i==t?(inpFahrenheit.val(convertTemperature.f+1.8*i),inpKelvin.val(convertTemperature.k+i)):i==r?(inpCelsius.val((i-convertTemperature.f)*(5/9)),inpKelvin.val((i-convertTemperature.f)*(5/9)+convertTemperature.k)):i==a?(inpCelsius.val(i-convertTemperature.k),inpFahrenheit.val(1.8*(i-convertTemperature.f)+convertTemperature.f)):clearFields()})}),$(".tabbar ul li a").on("click",function(e){e.preventDefault(),$(".tabbar ul li a").removeClass("active pressed disabled"),$(this).addClass("active pressed disabled"),clearFields()}),$(document).ready(function(){showTab(event,"length"),setFormHeight()}),$(window).resize(function(){setFormHeight()});